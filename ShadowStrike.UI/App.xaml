<Application x:Class="ShadowStrike.UI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Dark" PrimaryColor="Blue" SecondaryColor="Cyan" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <!-- Dark Theme Menu Styling Doing-->
            <Style TargetType="Menu">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="White"/>
            </Style>
            
            <Style TargetType="MenuItem">
                <Setter Property="Background" Value="#1E1E2E"/>
                <Setter Property="Foreground" Value="#E6EDF3"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="12,8"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="MenuItem">
                            <Border Name="Border" Background="{TemplateBinding Background}" BorderThickness="0" CornerRadius="4" Margin="2">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="Icon"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <ContentPresenter Name="Icon" Margin="6,0,6,0" VerticalAlignment="Center" ContentSource="Icon"/>
                                    <ContentPresenter Name="HeaderHost" Grid.Column="1" ContentSource="Header" RecognizesAccessKey="True" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="2" Text="{TemplateBinding InputGestureText}" Margin="5,2,2,2" VerticalAlignment="Center" Foreground="#8B949E"/>
                                    <Path Grid.Column="3" Name="ArrowPath" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="4,0,6,0" Fill="#E6EDF3" Data="M 0 0 L 4 3.5 L 0 7 Z" Visibility="Collapsed"/>
                                    
                                    <Popup Name="Popup" Placement="Right" HorizontalOffset="-4" IsOpen="{TemplateBinding IsSubmenuOpen}" AllowsTransparency="True" Focusable="False" PopupAnimation="Fade">
                                        <Border Name="SubmenuBorder" SnapsToDevicePixels="True" Background="#1E1E2E" BorderBrush="#30363D" BorderThickness="1" CornerRadius="6" Padding="4">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle"/>
                                        </Border>
                                    </Popup>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="Role" Value="TopLevelHeader">
                                    <Setter TargetName="Popup" Property="Placement" Value="Bottom"/>
                                    <Setter TargetName="ArrowPath" Property="Visibility" Value="Collapsed"/>
                                    <Setter TargetName="Border" Property="Margin" Value="0"/>
                                    <Setter TargetName="Border" Property="CornerRadius" Value="0"/>
                                </Trigger>
                                <Trigger Property="Role" Value="TopLevelItem">
                                    <Setter TargetName="ArrowPath" Property="Visibility" Value="Collapsed"/>
                                    <Setter TargetName="Border" Property="Margin" Value="0"/>
                                    <Setter TargetName="Border" Property="CornerRadius" Value="0"/>
                                </Trigger>
                                <Trigger Property="Role" Value="SubmenuHeader">
                                    <Setter TargetName="ArrowPath" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <Trigger Property="IsHighlighted" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#2D2D44"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Foreground" Value="#6E7681"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- Separator Style for Menu -->
            <Style TargetType="Separator">
                <Setter Property="Background" Value="#30363D"/>
                <Setter Property="Height" Value="1"/>
                <Setter Property="Margin" Value="8,4"/>
            </Style>
            
        </ResourceDictionary>
    </Application.Resources>
</Application>
